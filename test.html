<html>
    <script type="module">
        import {SignUp, SignIn, SimClient, TideJWT, EdDSA, Point} from "/modules/TideJS/index.js";
        /*
        var cmkOrks = [["2527689245118197790113231778399786267654070552711339962487622855626901589953", "http://host.docker.internal:1001", Point.fromB64("WGZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmY=")], ["6393847925575234000169843195548208585270417612196919584745964877580038090425", "http://host.docker.internal:1003", Point.fromB64("1LT1eEhowwIEAyRnF+wWn/eeJmCOoSahq2nud9GxZxI=")], ["4632947133711470616417116433625114571768440046220722468064461787170709195526", "http://host.docker.internal:1002", Point.fromB64("yaP4aq5GXw5WUThkUQ85l1YfosnoXqIdwikjCfPNYCI=")]];
        var cvkOrks = cmkOrks;
        var simUrl = "http://host.docker.internal:2000/"
        var config = {
            cmkOrkInfo: cmkOrks,
            cvkOrkInfo: cvkOrks,
            simulatorUrl: simUrl
        }
        var su = new SignUp(config);
        var user = Date.now().toString();
        var gVVK = "WGZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmY=";
        var jwt1 = await su.start(user, "pass", gVVK);
        console.log(jwt1);

        var si = new SignIn(config);
        var jwt2 = await si.start(user, "pass", gVVK);
        console.log(jwt2);

        var simC = new SimClient("http://host.docker.internal:2000/");
        var pub = await simC.GetKeyPublic(TideJWT.getUID(jwt2));
        console.log(pub.toBase64())
        var valid = await TideJWT.verify(jwt2, pub);
        console.log(valid);
        */
       var vvk = BigInt("98721782478645378956489436475684545");
       var gVVK = Point.g.times(vvk);
       var sig = await EdDSA.sign("http://localhost:9000/example.html", vvk);
       console.log(sig);
       console.log(gVVK.toBase64());
    </script>
</html>