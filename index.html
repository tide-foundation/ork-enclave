<!-- v3.0 -->
<!DOCTYPE html>
<html lang="en">
<head>
	<title>Tide h4x Enclave Login</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<!--===============================================================================================-->	
	<link class="links" rel="icon" type="image/png" href="images/icons/favicon.png"/>
<!--===============================================================================================-->
	<link class="links" rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
	<link class="links" rel="stylesheet" type="text/css" href="fonts/iconic/css/material-design-iconic-font.min.css">
	<!--===============================================================================================-->
	<link class="links" rel="stylesheet" type="text/css" href="css/util.css">
	<link class="links" rel="stylesheet" type="text/css" href="css/main.css">
	<!--===============================================================================================-->
	<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<!--===============================================================================================-->
</head>
<body>
	<!--============================ CHECK THIS INTEGRITY HASH ============================================-->
	<script class="s_links" type="module" src="./js/main.js"></script>
	<!--===================================================================================================-->
	<div>
		<div class="limiter">
			<div class="container-enclave" id="container-enclave-id" style="background-image: url('images/bg-01.jpg');">
				<div id="div-si" style="display: none;" class="wrap-enclave">
					<form class="enclave-form validate-form-si">
						<span class="enclave-form-logo">
							<img class="s_links" src="images/logo.png">
						</span>
	
						<span class="enclave-form-title p-b-34 p-t-27">
							Sign in your authority
						</span>
	
	
						<div class="wrap-input100 validate-input-si" data-validate = "Enter username">
							<input class="input100" type="text" name="username" placeholder="Username" style="text-transform: lowercase;">
							<span class="focus-input100" data-placeholder="&#xf207;"></span>
						</div>
	
						<div class="wrap-input100 validate-input-si" data-validate="Enter password">
							<input class="input100" type="password" name="pass" placeholder="Password">
							<span class="focus-input100" data-placeholder="&#xf191;"></span>
						</div>
	
						
						<div class="container-enclave-form-btn">
							<button class="enclave-form-btn" id="submit-btn-si">
								Sign in
							</button>
						</div>
						<p class="txtalert p-t-35" id="alert-si"> </p>
	
						<div class="loading" id ="loader" style="display:none"></div>
	
						<div class="text-center p-t-90">
							<u class="txt1" onclick="showSignUp()">
								Create account
							</u>
							<span>
								<u class="txt1 p-l-20" onclick="rehome()">
									Change node
								</u>
								<u class="txt1 p-l-20" onclick="showChangePassword()">
									Forgot password
								</u>
							</span>
						</div>
					</form>
				</div>

				<!--Sign Up-->				
				<div style="display: block;" id="div-su" class="wrap-enclave">
					<form class="enclave-form validate-form-su">
						<span class="enclave-form-logo">
							<img class="s_links" src="images/logo.png">
						</span>
	
						<span class="enclave-form-title p-b-34 p-t-27">
							Create an account
						</span>
	
						<div class="wrap-input100 validate-input-su" data-validate = "Enter username">
							<input class="input100" type="text" name="username" placeholder="Username" style="text-transform: lowercase;">
							<span class="focus-input100" data-placeholder="&#xf207;"></span>
						</div>
	
						<div class="wrap-input100 validate-input-su" data-validate="Enter password">
							<input class="input100" type="password" name="pass" placeholder="Password">
							<span class="focus-input100" data-placeholder="&#xf191;"></span>
						</div>
	
						<div class="wrap-input100 validate-input-su" data-validate="Repeat password">
							<input class="input100" type="password" name="pass" placeholder="Repeat Password">
							<span class="focus-input100" data-placeholder="&#xf191;"></span>
						</div>
						
	
						<div class="txt2 p-t-5">	
								Select 5 nodes
						</div>
						<div class = "dropdown" data-validate = "Select 3 orks">
							<div class="loading" id ="orkloader"></div>
							<select class="js-example-basic-multiple form-control" id="ork-drop-down" name="orks[]" multiple="multiple">
						   </select>
					   </div>
	
						
						<div class="container-enclave-form-btn  p-b-3 p-t-27">
							<button class="enclave-form-btn" id="submit-btn-su">
								Sign Up
							</button>
						</div>
						<p class="txtalert p-t-15" id="alert-su"> </p>
	
						<div class="loading" id ="loader-su" style="display:none"></div>
	
						<div class="text-center p-t-30">
							<u class="txt1" onclick="showSignIn()">
								Already a user? Sign in
							</u>
							<span>
								<u class="txt1 p-l-20" onclick="rehome()">
									Change node
								</u>
							</span>
						</div>
					</form>
				</div>
				<!--Change Password-->
				<div style="display: none;" id="div-cp" class="wrap-enclave">
					<form class="enclave-form validate-form-cp">
						<span class="enclave-form-logo">
							<img class="s_links" src="images/logo.png">
						</span>

						<span class="enclave-form-title p-b-34 p-t-27">
							Change Password
						</span>

						<div class="wrap-input100 validate-input-cp" data-validate = "Enter new password">
							<input class="input100" type="password" name="New Password" placeholder="New Password">
							<span class="focus-input100" data-placeholder="&#xf191;"></span>
						</div>

						<div class="wrap-input100 validate-input-cp" data-validate="Repeat password">
							<input class="input100" type="password" name="pass" placeholder="Repeat Password">
							<span class="focus-input100" data-placeholder="&#xf191;"></span>
						</div>
					
					
						<div class="container-enclave-form-btn  p-b-3 p-t-27">
							<button class="enclave-form-btn" id="submit-btn-cp">
								Done
							</button>
						</div>
						<p class="txtalert p-t-15" id="alert-cp"> </p>

						<div class="loading" id ="loader-cp" style="display:none"></div>

						<div class="text-center p-t-50">
							<u class="txt1" onclick="showSignIn()">
								Sign in instead?
							</u>
						</div>
					</form>
				</div>

				<!--Forgot Password-->
				<div style="display: none;" id="div-fp" class="wrap-enclave">
					<form class="enclave-form validate-form-fp">
						<span class="enclave-form-logo">
							<img class="s_links" src="images/logo.png">
						</span>

						<span class="enclave-form-title p-b-34 p-t-27">
							Forgot Password
						</span>

						<div class="wrap-input100 validate-input-fp" data-validate = "Enter Username">
							<input class="input100" type="text" name="username" placeholder="Username" style="text-transform: lowercase;">
							<span class="focus-input100" data-placeholder="&#xf191;"></span>
						</div>
					
						<div class="container-enclave-form-btn  p-b-3 p-t-27">
							<button class="enclave-form-btn" id="submit-btn-cp">
								Request Recovery
							</button>
						</div>
						<p class="txtalert p-t-15" id="alert-cp"> </p>

						<div class="loading" id ="loader-cp" style="display:none"></div>

						<div class="text-center p-t-50">
							<u class="txt1" onclick="showSignIn()">
								Remember your password? Sign in
							</u>
						</div>
					</form>
				</div>
			
			
			</div>
		</div>
	
	
		<div id="dropDownSelect1"></div>
		<script class="s_links" src="vendor/jquery/jquery-3.2.1.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
	
		<script type="text/javascript">
			$(document).ready(function() {
				$(".js-example-basic-multiple").select2({
					maximumSelectionLength: 5
				});
				document.getElementById("div-si").style.display = "block";
				document.getElementById("div-su").style.display = "none";
			});
	
			function showChangePassword(){
				document.getElementById("div-cp").style.display = "block";
				document.getElementById("div-su").style.display = "none";
				document.getElementById("div-si").style.display = "none";

			}
			function showSignIn(){
				document.getElementById("div-cp").style.display = "none";
				document.getElementById("div-su").style.display = "none";
				document.getElementById("div-si").style.display = "block";
			}
			function showSignUp(){
				document.getElementById("div-cp").style.display = "none";
				document.getElementById("div-su").style.display = "block";
				document.getElementById("div-si").style.display = "none";
			}

			function changeOrigin(newOrigin) {
				var currentLocation = window.location;
				var newPath = newOrigin + currentLocation.pathname + currentLocation.search;

				window.location.href = newPath; // Redirect to the new URL
			}
	
			function rehome(){
				let newORKUrl = prompt("Enter new ORK URL:", "https://prod-ork3.azurewebsites.net");
				if(newORKUrl == null) return; // in case user cancels
				const params = new URLSearchParams(window.location.search);

				const response = {
					ok: true,
					dataType: "newORKUrl",
					url: newORKUrl
				}

				window.opener.postMessage(response, params.get("vendorUrl")); // post jwt to vendor window which opened this enclave
				changeOrigin(newORKUrl);
			}
		</script>
	</div>
</body>

</html>